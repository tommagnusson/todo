<!DOCTYPE html><html><head>
      <title>README</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:////Users/tommymagnusson/.vscode/extensions/shd101wyy.markdown-preview-enhanced-0.3.11/node_modules/@shd101wyy/mume/dependencies/katex/katex.min.css">
      
      
      
      
      
      
      
      
      

      <style> 
      /**
 * prism.js Github theme based on GitHub's theme.
 * @author Sam Clarke
 */
code[class*="language-"],
pre[class*="language-"] {
  color: #333;
  background: none;
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.4;

  -moz-tab-size: 8;
  -o-tab-size: 8;
  tab-size: 8;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
  padding: .8em;
  overflow: auto;
  /* border: 1px solid #ddd; */
  border-radius: 3px;
  /* background: #fff; */
  background: #f5f5f5;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
  white-space: normal;
  background: #f5f5f5;
}

.token.comment,
.token.blockquote {
  color: #969896;
}

.token.cdata {
  color: #183691;
}

.token.doctype,
.token.punctuation,
.token.variable,
.token.macro.property {
  color: #333;
}

.token.operator,
.token.important,
.token.keyword,
.token.rule,
.token.builtin {
  color: #a71d5d;
}

.token.string,
.token.url,
.token.regex,
.token.attr-value {
  color: #183691;
}

.token.property,
.token.number,
.token.boolean,
.token.entity,
.token.atrule,
.token.constant,
.token.symbol,
.token.command,
.token.code {
  color: #0086b3;
}

.token.tag,
.token.selector,
.token.prolog {
  color: #63a35c;
}

.token.function,
.token.namespace,
.token.pseudo-element,
.token.class,
.token.class-name,
.token.pseudo-class,
.token.id,
.token.url-reference .token.variable,
.token.attr-name {
  color: #795da3;
}

.token.entity {
  cursor: help;
}

.token.title,
.token.title .token.punctuation {
  font-weight: bold;
  color: #1d3e81;
}

.token.list {
  color: #ed6a43;
}

.token.inserted {
  background-color: #eaffea;
  color: #55a532;
}

.token.deleted {
  background-color: #ffecec;
  color: #bd2c00;
}

.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}


/* JSON */
.language-json .token.property {
  color: #183691;
}

.language-markup .token.tag .token.punctuation {
  color: #333;
}

/* CSS */
code.language-css,
.language-css .token.function {
  color: #0086b3;
}

/* YAML */
.language-yaml .token.atrule {
  color: #63a35c;
}

code.language-yaml {
  color: #183691;
}

/* Ruby */
.language-ruby .token.function {
  color: #333;
}

/* Markdown */
.language-markdown .token.url {
  color: #795da3;
}

/* Makefile */
.language-makefile .token.symbol {
  color: #795da3;
}

.language-makefile .token.variable {
  color: #183691;
}

.language-makefile .token.builtin {
  color: #0086b3;
}

/* Bash */
.language-bash .token.keyword {
  color: #0086b3;
}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ul,html body>ol{margin-bottom:16px}html body ul,html body ol{padding-left:2em}html body ul.no-list,html body ol.no-list{padding:0;list-style-type:none}html body ul ul,html body ul ol,html body ol ol,html body ol ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:bold;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em !important;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::before,html body code::after{letter-spacing:-0.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em !important;word-break:normal;white-space:pre;background:transparent;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em !important;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:before,html body pre tt:before,html body pre code:after,html body pre tt:after{content:normal}html body p,html body blockquote,html body ul,html body ol,html body dl,html body pre{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body pre,html body code{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{padding:0 1.6em;margin-top:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc li{margin-bottom:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{list-style-type:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  150px);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
 
      </style>
    </head>
    <body for="html-export">
      <div class="mume markdown-preview   ">
      <h1 class="mume-header" id="todo">Todo</h1>

<p>Version 00x0.0.0.0.0.1.1.1</p>
<h2 class="mume-header" id="author-and-credits">Author and Credits</h2>

<p><strong>Thomas Magnusson</strong> - <em>All current work</em> - <a href="https://github.com/tommagnusson">tommagnusson</a><br>
<strong>Daniel Gisolfi</strong> - <em>Markdown template author</em> - <a href="https://github.com/dgisolfi">dgisolfi</a></p>
<ul>
<li><a href="#todo">Todo</a>
<ul>
<li><a href="#author-and-credits">Author and Credits</a></li>
<li><a href="#section-1-introduction">Section 1 Introduction</a>
<ul>
<li><a href="#11-genealogy">1.1 Genealogy</a></li>
<li><a href="#12-hello-world">1.2 Hello World</a></li>
<li><a href="#13-program-structure">1.3 Program structure</a></li>
<li><a href="#14-types-and-variables">1.4 Types and Variables</a></li>
<li><a href="#15-statements">1.5 Statements</a></li>
</ul>
</li>
<li><a href="#section-2-lexical-structure">Section 2 Lexical Structure</a>
<ul>
<li><a href="#21-programs">2.1 Programs</a></li>
<li><a href="#22-grammars">2.2 Grammars</a>
<ul>
<li><a href="#221-lexical-grammar-in-todo-differing-from-java-and-swift">2.2.1 Lexical grammar in Todo differing from Java and Swift</a></li>
<li><a href="#222-syntactic-grammar-in-todo-differing-from-swift-and-java">2.2.2 Syntactic grammar in Todo differing from Swift and Java</a></li>
</ul>
</li>
<li><a href="#23-lexical-analysis">2.3 Lexical Analysis</a>
<ul>
<li><a href="#231-comments">2.3.1 Comments</a></li>
</ul>
</li>
<li><a href="#24-tokens">2.4 Tokens</a>
<ul>
<li><a href="#241-keywords-in-todo-differing-from-java-and-swift">2.4.1 Keywords in Todo differing from Java and Swift</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#section-3-types">Section 3 Types</a>
<ul>
<li><a href="#31-value-types">3.1 Value Types</a></li>
<li><a href="#32-reference-types">3.2 Reference Types</a></li>
</ul>
</li>
<li><a href="#section-4-example-programs">Section 4 Example Programs</a>
<ul>
<li><a href="#41-caesar-cipher">4.1 Caesar Cipher</a></li>
<li><a href="#42-factorial">4.2 Factorial</a></li>
<li><a href="#43-merge-sort">4.3 Merge Sort</a></li>
<li><a href="#44-linked-list">4.4 Linked List</a></li>
<li><a href="#45-merkle-tree-remember-this">4.5 Merkle Tree (remember this??)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="mume-header" id="section-1-introduction">Section 1 Introduction</h2>

<p>Todo stands on the shoulders of design giants such as Swift, Rust, C, Python, Java, JavaScript, TypeScript, and many more countless modern languages whose subtle influences have inflitrated its design borders.</p>
<p>It is meant as a modern, general purpose, object oriented language for casual projects, and focuses on expressivity and orthogonality over performance or features.</p>
<p>Some of the main concepts it borrows:</p>
<ul>
<li>Static Typing from Swift, Rust, Java and TypeScript</li>
<li>Mutable vs immutable variable references from Swift, Rust and JavaScript (e.g. <code>const</code> vs <code>let</code>)</li>
<li>String interpolation from JavaScript and Swift</li>
<li>Type inference from Swift and Rust</li>
<li><code>Struct</code> value semantics from Swift, Rust, and C</li>
<li>Modules from like every modern language these days (JavaScript notably)</li>
</ul>
<h3 class="mume-header" id="11-genealogy">1.1 Genealogy</h3>

<p><img src="./genealogy.jpg" alt="todo genealogy"></p>
<p><em>Credit to: <a href="https://image.slidesharecdn.com/sestoft-compilerhistory-aau-infinit-20141124-141205074050-conversion-gate01/95/a-history-of-nordic-compilers-and-autocodes-6-638.jpg?cb=1417765345">https://image.slidesharecdn.com/sestoft-compilerhistory-aau-infinit-20141124-141205074050-conversion-gate01/95/a-history-of-nordic-compilers-and-autocodes-6-638.jpg?cb=1417765345</a></em></p>
<h3 class="mume-header" id="12-hello-world">1.2 Hello World</h3>

<p>The most basic of programs implemented in Todo.</p>
<pre data-role="codeBlock" data-info="swift" class="language-swift"><span class="token comment">// in hello.todo</span>
<span class="token keyword">public</span> <span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span>
</pre><p><code>public</code> denotes the visibility of the closure. If there&apos;s only one public closure within a Module (in this case, the file) then it will be run. This is akin to a <code>main</code> function. Note the arrow closure notation like JavaScript, and the simple <code>print</code> function which is automatically available because every module implicitly imports the language library, which includes <code>print</code>.</p>
<pre data-role="codeBlock" data-info="" class="language-"><code>$ todo hello.todo
$ hello world
</code></pre><h3 class="mume-header" id="13-program-structure">1.3 Program structure</h3>

<p>Todo key organizational concepts</p>
<ul>
<li>Files must have a name that ends in the file extension <code>.todo</code></li>
<li>Each file is automatically exported as a module unless it is broken up into modules within the file</li>
<li>Each module implicitly imports</li>
</ul>
<p>File <code>Recipe.todo</code>:</p>
<pre data-role="codeBlock" data-info="swift" class="language-swift"><span class="token keyword">import</span> <span class="token builtin">Ingredients</span> from <span class="token string">&apos;./ingredients.todo&apos;</span>

<span class="token comment">// Struct types are pass-by-copy, but are passed around with</span>
<span class="token comment">// shared pointers until they&apos;re written to (copy on write)</span>
<span class="token keyword">public</span> <span class="token keyword">struct</span> <span class="token builtin">Recipe</span> <span class="token punctuation">{</span>

    <span class="token comment">// note the &apos;get&apos;, meaning directions is read only externally</span>
    <span class="token comment">// we are free to modify the directions internally though</span>
    <span class="token keyword">public</span> <span class="token keyword">get</span> directions<span class="token punctuation">:</span> <span class="token builtin">String</span>
    <span class="token keyword">public</span> <span class="token keyword">get</span> ingredients<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">Ingredients</span><span class="token punctuation">]</span>

    <span class="token comment">// this is a constructor which takes in two arguments</span>
    <span class="token comment">// type is denoted using a colon after the parameter name</span>
    <span class="token function">Recipe</span><span class="token punctuation">(</span>directions<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> ingredients<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">Ingredient</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// note self, taken from Swift, just like &apos;this&apos; in Java or JavaScript</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>directions <span class="token operator">=</span> directions <span class="token comment">// equals = assignment...</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>ingredients <span class="token operator">=</span> ingredients<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// `pure` means that this function produces no side-effects, can only use read-only copies of variables</span>
    <span class="token keyword">public</span> pure render <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token comment">// note the &quot;string ${interpolation}&quot; from JavaScript</span>

        <span class="token comment">// can optionally be explicit about type using :</span>
        <span class="token keyword">let</span> ingredientList<span class="token punctuation">:</span> string <span class="token operator">=</span> ingredients<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;&lt;li&gt;${i.toString()}&lt;/li&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i1<span class="token punctuation">,</span> i2<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;${i1}${i2}&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&lt;p&gt;${self.directions}&lt;/p&gt;&lt;ul&gt;${ingredientList}&lt;/ul&gt;&quot;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// every struct (and class) has a toString function</span>
    <span class="token comment">// override is to override it</span>
    <span class="token comment">// I&apos;m assigning the render function to be its toString function as well</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> pure <span class="token builtin">toString</span> <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">.</span>render
<span class="token punctuation">}</span>
</pre><p><code>Recipe.todo</code> only coincidentally has a <code>struct</code> of the same name declared inside of it. The <code>struct</code> <code>Recipe</code> would be used to render some directions and ingredients in a web application, perhaps. The constructor takes in directions and ingredients, and then has a <code>pure</code> render function which renders the HTML to display the two instance variables together. A caller who has imported this <code>struct</code> would call <code>let recipe = Recipe(&quot;Cook it&quot;, [new Ingredient(&quot;bacon&quot;)]</code> to create an instance of a recipe struct.</p>
<h3 class="mume-header" id="14-types-and-variables">1.4 Types and Variables</h3>

<p>Todo offers two main flavors of types: <code>struct</code> and <code>class</code>.</p>
<p><code>struct</code> is the bread and butter of most data within a Todo program, and offers value semantics. They are meant to be lightweight, mostly read-only structures that hold information and contain the occasional convenience methods. They are pass by value, but are typically passed around through a pointer until written to, at which point they are copied and modified in the appropriate scopes.</p>
<p><code>class</code> is the familiar, object-oriented reference type that offers inheritence and composition through <code>interface</code>s and <code>abstract class</code>es. It is meant for heavy objects such as connections to databases and pointers to large amounts of deeply nested data structures.</p>
<p><code>struct</code> and <code>class</code> types are instantiated with very similar syntax and have many syntactic similarities, despite having wildly different performance impacts.</p>
<h3 class="mume-header" id="15-statements">1.5 Statements</h3>

<p><strong>Array Literals and Struct Instantiation</strong></p>
<p>In Todo:</p>
<pre data-role="codeBlock" data-info="swift" class="language-swift"><span class="token comment">// creates an array with one instance of ingredient within it</span>
<span class="token comment">// and assigns it to ingredients</span>
<span class="token keyword">let</span> ingredients <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token function">Ingredient</span><span class="token punctuation">(</span><span class="token string">&quot;1 juicy Lime&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Ingredient</span><span class="token punctuation">(</span><span class="token string">&quot;1 large Coconut&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> recipe <span class="token operator">=</span> <span class="token function">Recipe</span><span class="token punctuation">(</span><span class="token string">&quot;Put the lime in the coconut and shake it all up&quot;</span><span class="token punctuation">,</span> ingredients<span class="token punctuation">)</span>
<span class="token comment">// let IS NOT the same as let in JavaScript...</span>
<span class="token comment">// let IS THE SAME as in Swift (i.e. cannot reassign or redeclare)</span>
<span class="token keyword">let</span> html <span class="token operator">=</span> recipe<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</pre><p>In Java:</p>
<pre data-role="codeBlock" data-info="java" class="language-java">Ingredient<span class="token punctuation">[</span><span class="token punctuation">]</span> ingredients <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ingredient</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token class-name">Ingredient</span><span class="token punctuation">(</span><span class="token string">&quot;1 juicy lime&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">Ingredient</span><span class="token punctuation">(</span><span class="token string">&quot;1 large coconut&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Recipe recipe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Recipe</span><span class="token punctuation">(</span><span class="token string">&quot;Put the lime in the coconut and shake it all up&quot;</span><span class="token punctuation">,</span> ingredients<span class="token punctuation">)</span><span class="token punctuation">;</span>

String html <span class="token operator">=</span> recipe<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p><strong>String Interpolation</strong></p>
<p>In Todo:</p>
<pre data-role="codeBlock" data-info="swift" class="language-swift"><span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">20</span>
<span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">&quot;Tom&quot;</span>
<span class="token keyword">let</span> greeting <span class="token operator">=</span> <span class="token string">&quot;Hello ${name}, I heard you&apos;re ${age} years old&quot;</span>
<span class="token function">print</span><span class="token punctuation">(</span>greeting<span class="token punctuation">)</span>
<span class="token comment">// &quot;Hello Tom, I heard you&apos;re 20 years old&quot;</span>
</pre><p>In Java:</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
String name <span class="token operator">=</span> <span class="token string">&quot;Tom&quot;</span><span class="token punctuation">;</span>
String greeting <span class="token operator">=</span> <span class="token string">&quot;Hello &quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;, I heard you&apos;re &quot;</span> <span class="token operator">+</span> age <span class="token operator">+</span> <span class="token string">&quot;  years old&quot;</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>greeting<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p><strong>Anonymous Function</strong></p>
<p>In Todo:</p>
<pre data-role="codeBlock" data-info="swift" class="language-swift"><span class="token comment">// there are no such things as &quot;methods&quot; that are declared as part of a class</span>
<span class="token comment">// All functions are always treated as variables (objects) themselves</span>
<span class="token comment">// They&apos;re differentiated using their type signatures, which are polymorphic</span>
<span class="token keyword">let</span> anonymous <span class="token operator">=</span> <span class="token punctuation">(</span>message<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;A message: ${message}&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// other form (heavily inspired by swift):</span>
<span class="token keyword">let</span> anonymous <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span>&quot;A message<span class="token punctuation">:</span> $<span class="token punctuation">{</span>$<span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
</pre><p>In Java:</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// not too bad, just not as short as using $0 for positional args</span>
let anonymous <span class="token operator">=</span> <span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;A message&quot;</span> <span class="token operator">+</span> message<span class="token punctuation">)</span>
</pre><h2 class="mume-header" id="section-2-lexical-structure">Section 2 Lexical Structure</h2>

<h3 class="mume-header" id="21-programs">2.1 Programs</h3>

<p>A Todo program consists of one or more source files. A source file is an ordered sequence of Unicode characters according to the Unicode Standard, and supports UTF-8 and UTF-16 encoding formats.</p>
<p>Conceptually speaking, a program is compiled using three steps:</p>
<ol>
<li>Transformation, which converts a file from a particular character repertoire and encoding scheme into a sequence of Unicode characters.</li>
<li>Lexical analysis, which translates a stream of Unicode input characters into a stream of tokens.</li>
<li>Syntactic analysis, which translates the stream of tokens into executable code.</li>
</ol>
<p>Todo also offer a REPL (read, evaluate, print, loop) that acts like an ML REPL. It offers a short circuit version of the steps described above.</p>
<h3 class="mume-header" id="22-grammars">2.2 Grammars</h3>

<h4 class="mume-header" id="221-lexical-grammar-in-todo-differing-from-java-and-swift">2.2.1 Lexical grammar in Todo differing from Java and Swift</h4>

<pre data-role="codeBlock" data-info="" class="language-"><code>unicode -&gt; unicode character

letter -&gt; &quot;A&quot;...&quot;Z&quot;

decimal -&gt; &quot;0&quot;...&quot;9&quot;.

identifier -&gt; &lt;letter&gt;([&lt;letter&gt; | decimal])+

integer_literal -&gt; &lt;decimal&gt;
                -&gt; &lt;decimal&gt;&lt;integer_literal&gt;

real_literal -&gt; &lt;integer_literal&gt;.&lt;integer_literal&gt;

string_literal -&gt; &quot;(&lt;unicode&gt;)*&quot;

array_literal -&gt; []
              -&gt; [&lt;expression&gt;]
              -&gt; [&lt;expression&gt;, (&lt;expression&gt;)+]

enum_literal -&gt; [&lt;expression&gt;]
             -&gt; [&lt;expression&gt; | (&lt;expression&gt;)+]

</code></pre><h4 class="mume-header" id="222-syntactic-grammar-in-todo-differing-from-swift-and-java">2.2.2 Syntactic grammar in Todo differing from Swift and Java</h4>

<p>Array access is an interesting grammar to examine. Java has very simple array accessess, without any of the range syntax. Swift offers a little more, but I add on the unbounded range to take a slice of an array from one number to the end of the array.</p>
<pre data-role="codeBlock" data-info="" class="language-"><code>&lt;import statement&gt; -&gt; import &lt;identifier&gt;
                   -&gt; import &lt;identifier&gt; from &lt;identifier&gt;
                   -&gt; import &lt;identifier&gt; from &lt;string_literal&gt;

&lt;unbounded range&gt; -&gt; &lt;integer_literal&gt;..
                  -&gt; &lt;identifier&gt;..

&lt;inclusive range&gt; -&gt; &lt;unbounded range&gt;.&lt;integer_literal&gt;
                  -&gt; &lt;unbounded range&gt;.&lt;identifier&gt;

&lt;exclusive range&gt; -&gt; &lt;unbounded range&gt;&lt;integer_literal&gt;
                  -&gt; &lt;unbounded range&gt;&lt;identifier&gt;

&lt;range&gt; -&gt; &lt;inclusive range&gt;
        -&gt; &lt;exclusive range&gt;

&lt;array_accessor&gt; -&gt; [&lt;identifier&gt;]
                 -&gt; [&lt;integer_literal&gt;]
                 -&gt; [&lt;range&gt;]
                 -&gt; [&lt;unbounded range&gt;]
                 -&gt; [&lt;expression&gt;]
</code></pre><h3 class="mume-header" id="23-lexical-analysis">2.3 Lexical Analysis</h3>

<h4 class="mume-header" id="231-comments">2.3.1 Comments</h4>

<p>Comments in Todo are standard, C-style, and do allow nesting. Because there&apos;s nothing more annoying than testing stuff out and breaking the syntax of a language by trying to comment out a large piece of code that contains comments. Seriously, why do so many fictitious languages not have nested comments?? We don&apos;t even have to implement this! Also, this language is called Todo, which suggests excellent comment semantics. Allowed nested comments is an example of this.</p>
<p><strong>Multline</strong></p>
<pre data-role="codeBlock" data-info="c" class="language-c"><span class="token comment">/*
    TODO:
    Todo
*/</span>
</pre><p><strong>Single line</strong></p>
<pre data-role="codeBlock" data-info="c" class="language-c"><span class="token comment">// TODO: todo</span>
</pre><h3 class="mume-header" id="24-tokens">2.4 Tokens</h3>

<p>There are several kinds of tokens: identifiers, keywords, literals, operators, and punctuators. White space and<br>
comments are not tokens, though they act as separators for tokens where needed.</p>
<p>Tokens:</p>
<ul>
<li>identifier</li>
<li>keyword</li>
<li>integer-literal</li>
<li>real-literal</li>
<li>string-literal</li>
<li>array-literal</li>
<li>enum-literal</li>
<li>operator-or-punctuator</li>
</ul>
<h4 class="mume-header" id="241-keywords-in-todo-differing-from-java-and-swift">2.4.1 Keywords in Todo differing from Java and Swift</h4>

<p>A <strong><em>keyword</em></strong> is an identifier of characters that is reserved, and cannot be used as an idenfitier, unless it is surrounded in back ticks, as in <code>`class`</code>.</p>
<p><em>Adopted from Swift and Java</em><br>
<code>class public private implements interface extends static</code></p>
<p><em>Adopted from Swift</em><br>
<code>get set let var self struct override _</code></p>
<p><em>new</em><br>
<code>pure module from</code></p>
<h2 class="mume-header" id="section-3-types">Section 3 Types</h2>

<h3 class="mume-header" id="31-value-types">3.1 Value Types</h3>

<p>As stated before, value types can be created using <code>struct</code> objects. They have enormous influence from Swift&apos;s <code>struct</code> constuction.</p>
<p>The standard library has a lot of examples of structs:</p>
<p><code>String</code> - created using String literals</p>
<pre data-role="codeBlock" data-info="swift" class="language-swift"><span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">&quot;Hello Alan&quot;</span>
</pre><p><code>Integer</code> - created using Integer literals</p>
<pre data-role="codeBlock" data-info="swift" class="language-swift"><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span>
</pre><p><code>Real</code> - created using Real literals</p>
<pre data-role="codeBlock" data-info="swift" class="language-swift"><span class="token keyword">let</span> pi <span class="token operator">=</span> <span class="token number">3.14</span>
</pre><p>Create your own money <code>struct</code>:</p>
<pre data-role="codeBlock" data-info="swift" class="language-swift"><span class="token keyword">public</span> <span class="token keyword">struct</span> <span class="token constant">USD</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">get</span> dollars<span class="token punctuation">:</span> <span class="token builtin">Integer</span>
    <span class="token keyword">public</span> <span class="token keyword">get</span> cents<span class="token punctuation">:</span> <span class="token builtin">Integer</span>

    <span class="token keyword">public</span> <span class="token function">USD</span><span class="token punctuation">(</span>dollars<span class="token punctuation">:</span> <span class="token builtin">Integer</span><span class="token punctuation">,</span> cents<span class="token punctuation">:</span> <span class="token builtin">Integer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>dollars <span class="token operator">=</span> dollars
        <span class="token keyword">self</span><span class="token punctuation">.</span>cents <span class="token operator">=</span> cents
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> pure <span class="token builtin">toString</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;$${dollars}.${cents} USD&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="32-reference-types">3.2 Reference Types</h3>

<p>Reference types are created using the <code>class</code> keyword, which has all the classical object oriented design principles baked into it, including inheritance, polymorphism, composition, etc.</p>
<pre data-role="codeBlock" data-info="swift" class="language-swift"><span class="token keyword">import</span> <span class="token builtin">HttpConnection</span> from <span class="token builtin">Network</span>
<span class="token keyword">import</span> fetch from <span class="token builtin">Network</span><span class="token punctuation">.</span><span class="token builtin">Fetch</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DatabaseConnection</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> dbName<span class="token punctuation">:</span> <span class="token builtin">String</span>
    <span class="token keyword">public</span> connection<span class="token punctuation">:</span> <span class="token builtin">HttpConnection</span>

    <span class="token keyword">public</span> <span class="token function">DatabaseConnection</span><span class="token punctuation">(</span>username<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> password<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> dbName<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token string">&quot;${username}@${dbName}&quot;</span>
        <span class="token function">fetchDb</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token function">print</span><span class="token punctuation">(</span>&quot;<span class="token builtin">Connected</span> to $<span class="token punctuation">{</span>$<span class="token number">0</span><span class="token punctuation">.</span>db<span class="token punctuation">}</span><span class="token operator">!</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h2 class="mume-header" id="section-4-example-programs">Section 4 Example Programs</h2>

<h3 class="mume-header" id="41-caesar-cipher">4.1 Caesar Cipher</h3>

<p>File <code>caesar.todo</code>:</p>
<pre data-role="codeBlock" data-info="swift" class="language-swift"><span class="token keyword">public</span> <span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// returns an array of single</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">.</span><span class="token function">charCodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token keyword">let</span> z <span class="token operator">=</span> <span class="token string">&quot;Z&quot;</span><span class="token punctuation">.</span><span class="token function">charCodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

    <span class="token comment">// where % is modulo</span>
    <span class="token keyword">let</span> wrapUp <span class="token operator">=</span> z <span class="token operator">-</span> <span class="token punctuation">(</span>a <span class="token operator">-</span> <span class="token punctuation">(</span>$<span class="token number">0</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">26</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> wrapDown <span class="token operator">=</span> a <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>$<span class="token number">0</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span> z<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">26</span><span class="token punctuation">)</span>

    <span class="token keyword">let</span> wrap <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>$<span class="token number">0</span> <span class="token operator">&gt;</span> a<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">wrapDown</span><span class="token punctuation">(</span>$<span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>$<span class="token number">0</span> <span class="token operator">&lt;</span> z<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">wrapUp</span><span class="token punctuation">(</span>$<span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> c
    <span class="token punctuation">}</span>

    <span class="token comment">// The compiler figures out the most general type for</span>
    <span class="token comment">// $0 that makes it available for comparison with</span>
    <span class="token comment">// a and z, which are Integers...</span>
    <span class="token comment">// Perhaps the compiler guesses it&apos;s either Integer or Real...</span>
    <span class="token keyword">let</span> isBetweenAZ <span class="token operator">=</span> <span class="token punctuation">(</span>$<span class="token number">0</span> <span class="token operator">&gt;=</span> a<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>$<span class="token number">0</span> <span class="token operator">&lt;=</span> z<span class="token punctuation">)</span>

    <span class="token keyword">let</span> addBetweenAZ <span class="token operator">=</span> <span class="token punctuation">(</span>shift<span class="token punctuation">:</span> <span class="token builtin">Integer</span><span class="token punctuation">,</span> charNum<span class="token punctuation">:</span> <span class="token builtin">Integer</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">isBetweenAZ</span><span class="token punctuation">(</span>charNum<span class="token punctuation">)</span> <span class="token operator">?</span>
            <span class="token function">wrap</span><span class="token punctuation">(</span>charNum <span class="token operator">+</span> shift<span class="token punctuation">)</span> <span class="token punctuation">:</span>
            charNum
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> subtractbetweenAZ <span class="token operator">=</span> <span class="token punctuation">(</span>shift<span class="token punctuation">:</span> <span class="token builtin">Integer</span><span class="token punctuation">,</span> charNum<span class="token punctuation">:</span> <span class="token builtin">Integer</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">isBetweenAZ</span><span class="token punctuation">(</span>charNum<span class="token punctuation">)</span> <span class="token operator">?</span>
            <span class="token function">wrap</span><span class="token punctuation">(</span>charNum <span class="token operator">-</span> shift<span class="token punctuation">)</span> <span class="token punctuation">:</span>
            charNum
    <span class="token punctuation">}</span>

    <span class="token comment">// note the higher order function partial shift</span>
    <span class="token keyword">let</span> crypt <span class="token operator">=</span> <span class="token punctuation">(</span>phrase<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> partialShift<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token builtin">Integer</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Integer</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// note the static &quot;method&quot; on the String struct</span>
        <span class="token keyword">return</span> <span class="token builtin">String</span><span class="token punctuation">.</span><span class="token function">fromCharCodes</span><span class="token punctuation">(</span>phrase<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">charCodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token function">partialShift</span><span class="token punctuation">(</span>$<span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// notice the * operator, which extracts the first argument</span>
    <span class="token comment">// out of the function, enabling a partial application of shift</span>
    <span class="token comment">// to the method</span>
    <span class="token keyword">let</span> encrypt <span class="token operator">=</span> <span class="token punctuation">(</span>phrase<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> shift<span class="token punctuation">:</span> <span class="token builtin">Integer</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">crypt</span><span class="token punctuation">(</span>phrase<span class="token punctuation">,</span> addBetweenAZ<span class="token operator">*</span><span class="token punctuation">(</span>shift<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> decrypt <span class="token operator">=</span> <span class="token punctuation">(</span>phrase<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> shift<span class="token punctuation">:</span> <span class="token builtin">Integer</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">crypt</span><span class="token punctuation">(</span>phrase<span class="token punctuation">,</span> subtractBetweenAZ<span class="token operator">*</span><span class="token punctuation">(</span>shift<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> solve <span class="token operator">=</span> <span class="token punctuation">(</span>phrase<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> maxShift<span class="token punctuation">:</span> <span class="token builtin">Integer</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// [lo...hi] range constuctor for an array</span>
        <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>maxShift<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;${$0}: ${decrypt(phrase, $0)}&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> phrase <span class="token operator">=</span> <span class="token string">&quot;az za&quot;</span>
    <span class="token keyword">let</span> shift <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token function">print</span><span class="token punctuation">(</span>phrase<span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span>shift<span class="token punctuation">)</span>
    <span class="token keyword">let</span> encrypted <span class="token operator">=</span> <span class="token function">encrypt</span><span class="token punctuation">(</span>phrase<span class="token punctuation">,</span> shift<span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span>encrypted<span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">decrypt</span><span class="token punctuation">(</span>encrypted<span class="token punctuation">,</span> shift<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token function">solve</span><span class="token punctuation">(</span>phrase<span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="42-factorial">4.2 Factorial</h3>

<p>File <code>factorial.todo</code>:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">import</span> factorial <span class="token keyword">from</span> Math

<span class="token keyword">public</span> <span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">factorial</span><span class="token punctuation">(</span>$<span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token comment">// jk...</span>
</pre><pre data-role="codeBlock" data-info="swift" class="language-swift"><span class="token keyword">public</span> <span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>

    <span class="token comment">// ? : ternary from Java</span>
    <span class="token comment">// == value identity, not reference identity (JS got that wrong)</span>
    <span class="token keyword">let</span> factorial <span class="token operator">=</span> <span class="token punctuation">{</span> $<span class="token number">0</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">:</span> <span class="token number">1</span> <span class="token operator">?</span> $<span class="token number">0</span> <span class="token operator">*</span> <span class="token function">factorial</span><span class="token punctuation">(</span>$<span class="token number">0</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">factorial</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">// 120</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="43-merge-sort">4.3 Merge Sort</h3>

<p>File <code>mergesort.todo</code>:</p>
<pre data-role="codeBlock" data-info="swift" class="language-swift"><span class="token comment">// Based on a tutorial https://www.raywenderlich.com/741-swift-algorithm-club-swift-merge-sort</span>
<span class="token keyword">public</span> <span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> merge <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">left</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">Integer</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">right</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">Integer</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// compares left and right using the function passed in</span>
        <span class="token comment">// the return value of the function is the next appended value</span>
        <span class="token comment">// _ is the &quot;null&quot; or &quot;nil&quot; value in the language</span>
        <span class="token keyword">return</span> <span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">zip</span><span class="token punctuation">(</span><span class="token keyword">left</span><span class="token punctuation">,</span> <span class="token keyword">right</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>l<span class="token punctuation">,</span> r<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">==</span> <span class="token number">_</span><span class="token punctuation">)</span> <span class="token keyword">return</span> r
            <span class="token keyword">if</span><span class="token punctuation">(</span>r <span class="token operator">==</span> <span class="token number">_</span><span class="token punctuation">)</span> <span class="token keyword">return</span> l
            <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">&gt;</span> r<span class="token punctuation">)</span> <span class="token keyword">return</span> r
            <span class="token keyword">return</span> l
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> mergeSort <span class="token operator">=</span> <span class="token punctuation">(</span>array<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">Integer</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// base case, single arrays are sorted</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>array<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token keyword">return</span> array

        <span class="token keyword">let</span> middle <span class="token operator">=</span> array<span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token number">2</span>

        <span class="token comment">// .. is non-inclusive range [lo..hi)</span>
        <span class="token comment">// access slices of arrays with ranges using brackets []</span>
        <span class="token keyword">let</span> <span class="token keyword">left</span> <span class="token operator">=</span> <span class="token function">mergeSort</span><span class="token punctuation">(</span>array<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">.</span><span class="token punctuation">.</span>middle<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> <span class="token keyword">right</span> <span class="token operator">=</span> <span class="token function">mergeSort</span><span class="token punctuation">(</span>array<span class="token punctuation">[</span>middle<span class="token punctuation">.</span><span class="token punctuation">.</span>array<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">)</span>

        <span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token keyword">left</span><span class="token punctuation">,</span> <span class="token keyword">right</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</pre><h3 class="mume-header" id="44-linked-list">4.4 Linked List</h3>

<p>File <code>linkedlist.todo</code>:</p>
<pre data-role="codeBlock" data-info="swift" class="language-swift"><span class="token comment">// Note generics using classic &lt;TypeHere&gt;</span>
<span class="token comment">// Inspired by TypeScript, Java, Swift, and a ton more object oriented languages</span>
<span class="token keyword">class</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> head<span class="token punctuation">:</span> <span class="token builtin">Node</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token number">_</span>

    <span class="token keyword">public</span> <span class="token function">LinkedList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">public</span> add <span class="token operator">=</span> <span class="token punctuation">(</span>datum<span class="token punctuation">:</span> T<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// var references can change</span>
        <span class="token keyword">var</span> tmp <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">.</span>head
        <span class="token keyword">while</span><span class="token punctuation">(</span>tmp <span class="token operator">!=</span> <span class="token number">_</span> <span class="token operator">&amp;&amp;</span> tmp<span class="token punctuation">.</span>next <span class="token operator">!=</span> <span class="token number">_</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            tmp <span class="token operator">=</span> tmp<span class="token punctuation">.</span>next
        <span class="token punctuation">}</span>
        tmp<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token function">Node</span><span class="token punctuation">(</span>datum<span class="token punctuation">,</span> <span class="token number">_</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> pop <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token number">_</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">_</span>

        <span class="token keyword">let</span> tmp <span class="token operator">=</span> <span class="token function">Node</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span>
        head <span class="token operator">=</span> head<span class="token punctuation">.</span>next
        <span class="token keyword">return</span> tmp
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> peek <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">Node</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token operator">&lt;</span>D<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">get</span> datum<span class="token punctuation">:</span> D
        <span class="token keyword">public</span> next<span class="token punctuation">:</span> D

        <span class="token keyword">public</span> <span class="token function">Node</span><span class="token punctuation">(</span>datum<span class="token punctuation">:</span> D<span class="token punctuation">,</span> next<span class="token punctuation">:</span> <span class="token builtin">Node</span><span class="token operator">&lt;</span>D<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">self</span><span class="token punctuation">.</span>datum <span class="token operator">=</span> datum
            <span class="token keyword">self</span><span class="token punctuation">.</span>next <span class="token operator">=</span> next
        <span class="token punctuation">}</span>

        <span class="token comment">// overloaded constructor for copy</span>
        <span class="token keyword">public</span> <span class="token function">Node</span><span class="token punctuation">(</span>node<span class="token punctuation">:</span> <span class="token builtin">Node</span><span class="token operator">&lt;</span>D<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">self</span><span class="token punctuation">.</span>datum <span class="token operator">=</span> node<span class="token punctuation">.</span>datum
            <span class="token keyword">self</span><span class="token punctuation">.</span>next <span class="token operator">=</span> node<span class="token punctuation">.</span>next
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="45-merkle-tree-remember-this">4.5 Merkle Tree (remember this??)</h3>

<p>File <code>merkletree.py</code>:</p>
<pre data-role="codeBlock" data-info="swift" class="language-swift"><span class="token keyword">import</span> hash from <span class="token builtin">Crypto</span><span class="token punctuation">.</span><span class="token builtin">SHA256</span>
<span class="token keyword">import</span> <span class="token builtin">Math</span>

<span class="token keyword">class</span> <span class="token class-name">MerkleTree</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">get</span> root<span class="token punctuation">:</span> <span class="token builtin">Data</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span>

    <span class="token function">MerkleTree</span><span class="token punctuation">(</span>leafData<span class="token punctuation">:</span> <span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> leaves <span class="token operator">=</span> leafData<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token function">Node</span><span class="token punctuation">(</span>$<span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> numLeaves <span class="token operator">=</span> leaves<span class="token punctuation">.</span>length
        <span class="token keyword">if</span><span class="token punctuation">(</span>numLeaves <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">self</span><span class="token punctuation">.</span>root <span class="token operator">=</span> leaves<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">let</span> nextPowerOfTwo <span class="token operator">=</span> <span class="token builtin">Math</span><span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token builtin">Math</span><span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token builtin">Math</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>numLeaves<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token builtin">Math</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> exremainder <span class="token operator">=</span> nextPowerOfTwo <span class="token operator">-</span> numLeaves

        <span class="token keyword">let</span> whenToStop <span class="token operator">=</span> numLeaves <span class="token operator">-</span> exremainder

        <span class="token keyword">let</span> penultimateLevel<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">Node</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

        <span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">chunk</span><span class="token punctuation">(</span>leaves<span class="token punctuation">[</span>whenToStop<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            penultimateLevel<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">Node</span><span class="token punctuation">(</span>$<span class="token number">0</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> $<span class="token number">0</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        penultimateLevel<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>leaves<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">.</span><span class="token punctuation">.</span>whenToStop<span class="token punctuation">]</span><span class="token punctuation">)</span>

        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token operator">&lt;</span>D<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// create a simple enum whose underlying value is constrained to</span>
        <span class="token comment">// the types within the [], delimited by |</span>
        <span class="token keyword">enum</span> <span class="token keyword">Type</span><span class="token punctuation">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">LEAF</span> <span class="token operator">=</span> <span class="token string">&quot;leaf&quot;</span> <span class="token operator">|</span> <span class="token constant">INTERNAL</span> <span class="token operator">=</span> <span class="token string">&quot;internal&quot;</span><span class="token punctuation">]</span>

        <span class="token keyword">public</span> <span class="token keyword">get</span> type<span class="token punctuation">:</span> <span class="token keyword">Type</span>
        <span class="token keyword">public</span> <span class="token keyword">get</span> datum<span class="token punctuation">:</span> D
        <span class="token keyword">public</span> <span class="token keyword">left</span><span class="token punctuation">:</span> <span class="token builtin">Node</span><span class="token operator">&lt;</span>D<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token number">_</span>
        <span class="token keyword">public</span> <span class="token keyword">right</span><span class="token punctuation">:</span> <span class="token builtin">Node</span><span class="token operator">&lt;</span>D<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token number">_</span>

        <span class="token comment">// base case for leaf</span>
        <span class="token keyword">public</span> <span class="token function">Node</span><span class="token punctuation">(</span>datum<span class="token punctuation">:</span> D<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">self</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token keyword">Type</span><span class="token punctuation">.</span><span class="token constant">LEAF</span>
            <span class="token keyword">self</span><span class="token punctuation">.</span>datum <span class="token operator">=</span> datum
        <span class="token punctuation">}</span>

        <span class="token comment">// base case for internal</span>
        <span class="token keyword">public</span> <span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">left</span><span class="token punctuation">:</span> <span class="token builtin">Node</span><span class="token operator">&lt;</span>D<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token keyword">right</span><span class="token punctuation">:</span> <span class="token builtin">Node</span><span class="token operator">&lt;</span>D<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">self</span> <span class="token operator">=</span> <span class="token function">Node</span><span class="token punctuation">(</span><span class="token function">hash</span><span class="token punctuation">(</span><span class="token string">&quot;${left == _ ? &quot;</span><span class="token string">&quot; : left.data}${right == _ ? &quot;</span><span class="token string">&quot; : right.data}&quot;</span><span class="token punctuation">)</span>
            <span class="token keyword">self</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token keyword">Type</span><span class="token punctuation">.</span><span class="token constant">INTERNAL</span>
            <span class="token keyword">self</span><span class="token punctuation">.</span><span class="token keyword">left</span> <span class="token operator">=</span> <span class="token keyword">left</span>
            <span class="token keyword">self</span><span class="token punctuation">.</span><span class="token keyword">right</span> <span class="token operator">=</span> <span class="token keyword">right</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// recursive construction of subtree using list</span>
        <span class="token keyword">public</span> <span class="token function">Node</span><span class="token punctuation">(</span>nodes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">Node</span><span class="token operator">&lt;</span>D<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>nodes<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> nodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
            int i <span class="token operator">=</span> nodes<span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token number">2</span>
            <span class="token keyword">let</span> <span class="token keyword">left</span> <span class="token operator">=</span> nodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">.</span><span class="token punctuation">.</span>i<span class="token punctuation">]</span>
            <span class="token keyword">let</span> <span class="token keyword">right</span> <span class="token operator">=</span> nodes<span class="token punctuation">[</span>i<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>

            <span class="token comment">// stops sounding like a word after a while, right?</span>
            <span class="token keyword">return</span> <span class="token function">Node</span><span class="token punctuation">(</span><span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">left</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">right</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
      </div>
      
      
    
    
    
    
    
    
    
    
  
    </body></html>